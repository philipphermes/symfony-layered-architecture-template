deptrac:
    paths:
        - ./src
    exclude_files:
        - '#.*test.*#i'
    layers:
        -   name: Backend_Business
            collectors:
                -   type: directory
                    value: src/Backend/.+/Business/.*
        -   name: Backend_Persistence
            collectors:
                -   type: directory
                    value: src/Backend/.+/Persistence/.*
        -   name: Backend_Communication
            collectors:
                -   type: directory
                    value: src/Backend/.+/Communication/.*
        -   name: Backend_Presentation
            collectors:
                -   type: directory
                    value: src/Backend/.+/Presentation/.*
        -   name: Frontend_Controller
            collectors:
                -   type: directory
                    value: src/Frontend/.+/Controller/.*
        -   name: Frontend_Theme
            collectors:
                -   type: directory
                    value: src/Frontend/.+/Theme/.*
        -   name: Client
            collectors:
                -   type: directory
                    value: src/Client/.+/*
        -   name: Service
            collectors:
                -   type: directory
                    value: src/Service/.+/*
        -   name: Shared
            collectors:
                -   type: directory
                    value: src/Shared/.+/*
        -   name: Generated
            collectors:
                -   type: directory
                    value: src/Generated/*
        -   name: Doctrine
            collectors:
                -   type: classLike
                    value: ^Doctrine\\.*
        -   name: Vendor
            collectors:
                -   type: classLike
                    value: ^(Symfony|Psr|Monolog|Ramsey|League)\\.* #need to find a better solution

    ruleset:
        Backend_Business:
            - Backend_Business
            - Backend_Persistence
            - Service
            - Shared
            - Generated
            - Vendor
        Backend_Persistence:
            - Backend_Persistence
            - Service
            - Shared
            - Generated
            - Doctrine
            - Vendor
        Backend_Communication:
            - Backend_Communication
            - Backend_Business
            - Service
            - Shared
            - Generated
            - Vendor
        Backend_Presentation:
            - Backend_Presentation
        Frontend_Controller:
            - Frontend_Controller
            - Client
            - Service
            - Shared
            - Generated
            - Vendor
        Frontend_Theme:
            - Frontend_Theme
        Client:
            - Backend_Business
            - Client
            - Service
            - Shared
            - Generated
            - Vendor
        Service:
            - Service
            - Shared
            - Generated
            - Vendor
        Shared:
            - Shared
            - Generated
            - Vendor
        Generated:
            - Generated
            - Vendor
            - Doctrine # need this because of migrations
